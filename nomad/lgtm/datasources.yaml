apiVersion: 1
datasources:
- name: Mimir
  type: prometheus
  access: proxy
  basicAuth: false
  isDefault: false
  version: 1
  editable: false
  {{- $allocID := env "NOMAD_ALLOC_ID" -}}
  {{- range nomadService 1 $allocID "mimir" }}
  url: http://{{ .Address }}:{{ .Port }}/prometheus
  {{- end}}
  jsonData:
    httpHeaderName1: "X-Scope-OrgID"
  secureJsonData:
    httpHeaderValue1: "demo"
- name: Loki
  type: loki
  access: proxy
  basicAuth: false
  isDefault: true
  version: 1
  editable: false
  {{- range nomadService "loki" }}
  url: http://{{ .Address }}:{{ .Port }}
  {{- end}}
- name: Tempo
  type: tempo
  access: proxy
  basicAuth: false
  isDefault: false
  version: 1
  editable: false
  {{- range nomadService "tempo" }}
  url: http://{{ .Address }}:{{ .Port }}
  {{- end}}
